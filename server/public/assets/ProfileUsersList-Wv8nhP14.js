import{a as u}from"./api-kRYMRPhP.js";import{_ as m,c as a,a as e,b as g,l as h,g as f,d,t as n,F as p,r as v,o as l,f as k}from"./app-CEv5AtwB.js";const U={name:"ProfileUsersList",data(){return{users:[],loading:!1,error:null}},mounted(){this.loadUsers()},methods:{async loadUsers(){this.loading=!0,this.error=null;try{const s=await u.getAllUsers();this.users=s.users||s.data||[]}catch(s){this.error=s.message||"Ошибка загрузки пользователей",console.error("Error loading users:",s)}finally{this.loading=!1}},getUserInitials(s){const t=s.first_name?s.first_name[0].toUpperCase():"",c=s.last_name?s.last_name[0].toUpperCase():"";return t+c||"?"},getUserRole(s){return{1:"Администратор",2:"Пользователь",3:"Куратор",4:"Художник"}[s.role_id]||s.role_name||s.role||"Пользователь"}}},b={class:"admin-users-page"},y={class:"admin-header"},C={class:"users-list"},x={class:"list-header"},N=["disabled"],V={key:0,class:"loading-message"},B={key:1,class:"error-message"},I={key:2,class:"users-grid"},L={class:"user-avatar"},w=["src"],E={key:1,class:"avatar-placeholder"},F={class:"user-info"},P={class:"user-name"},R={class:"user-email"},S={class:"user-role"},A={key:3,class:"empty-message"};function D(s,t,c,T,r,i){const _=f("router-link");return l(),a("div",b,[e("div",y,[g(_,{to:"/profile",class:"back-link"},{default:h(()=>[...t[1]||(t[1]=[k(" ← Назад к профилю ",-1)])]),_:1}),t[2]||(t[2]=e("h1",null,"Управление пользователями",-1))]),e("div",C,[e("div",x,[t[3]||(t[3]=e("h3",null,"Все пользователи",-1)),e("button",{onClick:t[0]||(t[0]=(...o)=>i.loadUsers&&i.loadUsers(...o)),class:"load-users-button",disabled:r.loading},n(r.loading?"Загрузка...":"Обновить список"),9,N)]),r.loading?(l(),a("div",V," Загрузка пользователей... ")):d("",!0),r.error?(l(),a("div",B,n(r.error),1)):d("",!0),r.users.length?(l(),a("div",I,[(l(!0),a(p,null,v(r.users,o=>(l(),a("div",{key:o.id,class:"user-item"},[e("div",L,[o.avatar?(l(),a("img",{key:0,src:o.avatar,alt:"Аватар"},null,8,w)):(l(),a("div",E,n(i.getUserInitials(o)),1))]),e("div",F,[e("strong",P,n(o.first_name||"Не указано")+" "+n(o.last_name||""),1),e("span",R,n(o.email),1),e("span",S,n(i.getUserRole(o)),1)]),t[4]||(t[4]=e("div",{class:"user-actions"},[e("button",{class:"action-btn edit-btn"},"Изменить"),e("button",{class:"action-btn delete-btn"},"Удалить")],-1))]))),128))])):d("",!0),!r.loading&&!r.error&&r.users.length===0?(l(),a("div",A," Пользователи не найдены ")):d("",!0)])])}const z=m(U,[["render",D],["__scopeId","data-v-e32348f5"]]);export{z as default};
